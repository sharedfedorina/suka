# Testing Guide / –ì–∞–π–¥ –ø–æ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—é

## –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Å—ñ —Ç–µ—Å—Ç–∏
npm test

# –¢—ñ–ª—å–∫–∏ —é–Ω—ñ—Ç-—Ç–µ—Å—Ç–∏
npm run test:unit

# –¢—ñ–ª—å–∫–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏
npm run test:integration

# –¢—ñ–ª—å–∫–∏ —Ç–µ—Å—Ç–∏ –∫–ª—ñ–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É
npm run test:button

# Watch mode - —Ç–µ—Å—Ç–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è –ø—Ä–∏ –∑–º—ñ–Ω–∞—Ö
npm run test:watch
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç—ñ–≤

### 1. –Æ–Ω—ñ—Ç-—Ç–µ—Å—Ç–∏ (`test-preview-function.js`)
–ü–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–¥—É –±–µ–∑ –∑–∞–ø—É—â–µ–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞:

- ‚úÖ –Ü—Å–Ω—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ (form.js, form.html, server.js)
- ‚úÖ –ù–∞—è–≤–Ω—ñ—Å—Ç—å —Ñ—É–Ω–∫—Ü—ñ–π (previewSite, getFormParams)
- ‚úÖ Debug –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤ —Ñ—É–Ω–∫—Ü—ñ—è—Ö
- ‚úÖ Try-catch –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –±–µ–∑–ø–µ—á–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π (safeGetValue, safeGetChecked)
- ‚úÖ –ù–∞—è–≤–Ω—ñ—Å—Ç—å –∫–Ω–æ–ø–æ–∫ —É —Ñ–æ—Ä–æ–º—ñ
- ‚úÖ Cache-control headers
- ‚úÖ POST /generate route
- ‚úÖ URLSearchParams —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å
- ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å JavaScript (–∑–±–∞–ª–∞–Ω—Å–æ–≤–∞–Ω—ñ—Å—Ç—å –¥—É–∂–æ–∫)

**–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–µ—Å—Ç—ñ–≤:** 13
**–í–∏–º–æ–≥–∏:** –ù–µ –ø–æ—Ç—Ä–µ–±—É—î –∑–∞–ø—É—â–µ–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

### 2. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏ (`test-preview-integration.js`)
–ü–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å —Ä–æ–±–æ—Ç—É –∑ –∑–∞–ø—É—â–µ–Ω–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º:

- ‚úÖ –°–µ—Ä–≤–µ—Ä –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –Ω–∞ –ø–æ—Ä—Ç—É 6614
- ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å JavaScript –≤–∞–ª—ñ–¥–Ω–∏–π
- ‚úÖ `/js/form.js` –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ headers
- ‚úÖ POST `/generate` –ø—Ä–∏–π–º–∞—î form-data —ñ –ø–æ–≤–µ—Ä—Ç–∞—î HTML
- ‚úÖ –ì–µ–Ω–µ—Ä—É–≤–∞–Ω–Ω—è HTML –∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏

**–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–µ—Å—Ç—ñ–≤:** 4
**–í–∏–º–æ–≥–∏:** –°–µ—Ä–≤–µ—Ä –º–∞—î –±—É—Ç–∏ –∑–∞–ø—É—â–µ–Ω–∏–π (`npm run dev`)

### 3. –¢–µ—Å—Ç–∏ –∫–ª—ñ–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É (`test-actual-button-click.js`)
–°–∏–º—É–ª—é—é—Ç—å —Ä–µ–∞–ª—å–Ω–∏–π –∫–ª—ñ–∫ –Ω–∞ Preview –∫–Ω–æ–ø–∫—É:

- ‚úÖ Cache-busting version –ø—Ä–∏—Å—É—Ç–Ω—è –≤ HTML
- ‚úÖ HTML –≤—ñ–¥–¥–∞—î—Ç—å—Å—è –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ Cache-Control headers
- ‚úÖ Config –º–∞—î –≤—Å—ñ –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ –ø–æ–ª—è
- ‚úÖ POST /generate –ø—Ä–∞—Ü—é—î –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏ –∑ config

**–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–µ—Å—Ç—ñ–≤:** 4
**–í–∏–º–æ–≥–∏:** –°–µ—Ä–≤–µ—Ä –º–∞—î –±—É—Ç–∏ –∑–∞–ø—É—â–µ–Ω–∏–π (`npm run dev`)

## –©–æ —Ç–µ—Å—Ç—É—î—Ç—å—Å—è

### Preview —Ñ—É–Ω–∫—Ü—ñ—è
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ñ–æ—Ä–º–∏ –∑ POST method
- –î–æ–¥–∞–≤–∞–Ω–Ω—è hidden inputs
- –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –Ω–∞ `/generate`
- –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

### –°–µ—Ä–≤–µ—Ä
- –ü—Ä–∏–π–æ–º `application/x-www-form-urlencoded`
- –ú–µ—Ä–¥–∂ –¥–∞–Ω–∏—Ö –∑ `user-config.json`
- –ì–µ–Ω–µ—Ä—É–≤–∞–Ω–Ω—è HTML
- –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –≤–∞–ª—ñ–¥–Ω–æ–≥–æ HTML

### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
- –ù–∞—è–≤–Ω—ñ—Å—Ç—å –æ–±–æ–≤'—è–∑–∫–æ–≤–∏—Ö –ø–æ–ª—ñ–≤ (`page`, `hero`)
- –í–∞–ª—ñ–¥–Ω—ñ—Å—Ç—å JSON
- –î–µ—Ñ–æ–ª—Ç–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è

## –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ç–µ—Å—Ç—ñ–≤

### –Æ–Ω—ñ—Ç-—Ç–µ—Å—Ç
```javascript
test('–û–ø–∏—Å —Ç–µ—Å—Ç—É', () => {
  // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
  assert(condition, '–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É');
});
```

### –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω–∏–π —Ç–µ—Å—Ç
```javascript
function testNewFeature() {
  return new Promise((resolve, reject) => {
    // HTTP –∑–∞–ø–∏—Ç –¥–æ —Å–µ—Ä–≤–µ—Ä–∞
    // resolve(true) –∞–±–æ reject(new Error('...'))
  });
}
```

## –ö–æ–ª–∏ –∑–∞–ø—É—Å–∫–∞—Ç–∏ —Ç–µ—Å—Ç–∏

- ‚úÖ –ü–µ—Ä–µ–¥ –∫–æ–∂–Ω–∏–º commit
- ‚úÖ –ü—ñ—Å–ª—è –∑–º—ñ–Ω–∏ `form.js`, `server.js`, `user-config.json`
- ‚úÖ –ü—ñ—Å–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π
- ‚úÖ –ü–µ—Ä–µ–¥ deploy

## –©–æ —Ä–æ–±–∏—Ç–∏ —è–∫—â–æ —Ç–µ—Å—Ç–∏ –ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å

1. –ü–æ–¥–∏–≤–∏—Å—å –¥–µ—Ç–∞–ª—å–Ω–∏–π –ª–æ–≥ –ø–æ–º–∏–ª–∫–∏
2. –ü–µ—Ä–µ–≤—ñ—Ä —á–∏ –∑–∞–ø—É—â–µ–Ω–∏–π —Å–µ—Ä–≤–µ—Ä (–¥–ª—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤)
3. –ü–µ—Ä–µ–≤—ñ—Ä –æ—Å—Ç–∞–Ω–Ω—ñ –∑–º—ñ–Ω–∏ –≤ –∫–æ–¥—ñ
4. –í–∏–ø—Ä–∞–≤ –ø—Ä–æ–±–ª–µ–º—É
5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç–∏

## CI/CD Integration

–¢–µ—Å—Ç–∏ –º–æ–∂–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –≤ CI/CD pipeline:

```yaml
# .github/workflows/test.yml
name: Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
      - run: npm install
      - run: npm run test:unit
      - run: npm run dev & # –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä —É —Ñ–æ–Ω—ñ
      - run: sleep 3 # –î–∞—Ç–∏ —á–∞—Å –Ω–∞ –∑–∞–ø—É—Å–∫
      - run: npm run test:integration
```

## Troubleshooting

### "–°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω–∏–π"
```bash
cd constructor
npm run dev
# –í —ñ–Ω—à–æ–º—É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ:
npm run test:integration
```

### "ENOENT: no such file"
–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Å—è —â–æ —Ç–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó:
```bash
cd C:\ComoYo\Suka\constructor
npm test
```

### "Port 6614 already in use"
–ó—É–ø–∏–Ω–∏ —ñ–Ω—à—ñ –µ–∫–∑–µ–º–ø–ª—è—Ä–∏ —Å–µ—Ä–≤–µ—Ä–∞:
```bash
# Windows
netstat -ano | findstr :6614
taskkill /PID <PID> /F
```

## –ü—ñ–¥—Å—É–º–æ–∫

- üìä **–í—Å—å–æ–≥–æ —Ç–µ—Å—Ç—ñ–≤:** 21 (13 —é–Ω—ñ—Ç + 4 —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω–∏—Ö + 4 –∫–ª—ñ–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É)
- ‚ö° **–®–≤–∏–¥–∫—ñ—Å—Ç—å:** ~3 —Å–µ–∫—É–Ω–¥–∏
- ‚úÖ **–ü–æ–∫—Ä–∏—Ç—Ç—è:** Preview —Ñ—É–Ω–∫—Ü—ñ—è, Server, Config, Cache-busting
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è:** –ß–µ—Ä–µ–∑ npm scripts

–¢–µ—Å—Ç–∏ –≥–∞—Ä–∞–Ω—Ç—É—é—Ç—å —â–æ –∫–æ–∂–Ω–∞ –∑–º—ñ–Ω–∞ –Ω–µ –ª–∞–º–∞—î —ñ—Å–Ω—É—é—á—É —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å!

## Browser Cache Issue

–Ø–∫—â–æ –≤—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç—å –∞–ª–µ –∫–Ω–æ–ø–∫–∞ Preview –Ω–µ –ø—Ä–∞—Ü—é—î –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:

**–¶–µ 100% –ø—Ä–æ–±–ª–µ–º–∞ –∫–µ—à—É–≤–∞–Ω–Ω—è –≤ –±—Ä–∞—É–∑–µ—Ä—ñ.**

### –†—ñ—à–µ–Ω–Ω—è:

1. **Hard Refresh:** Ctrl+Shift+R (Chrome/Firefox) –∞–±–æ Cmd+Shift+R (Mac)
2. **DevTools Disable Cache:**
   - –í—ñ–¥–∫—Ä–∏–π F12 ‚Üí Network ‚Üí –ø–æ—Å—Ç–∞–≤—å –≥–∞–ª–æ—á–∫—É "Disable cache"
   - –û–Ω–æ–≤–∏—á—Ç–æ form.js –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–≤—Å—è –∑ `?v=20250117`
3. **–Ü–Ω–∫–æ–≥–Ω—ñ—Ç–æ:** –í—ñ–¥–∫—Ä–∏–π http://localhost:6614 –≤ —Ä–µ–∂–∏–º—ñ —ñ–Ω–∫–æ–≥–Ω—ñ—Ç–æ
4. **Clear Cache:** –í–∏–¥–∞–ª–∏ –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é

–Ø–∫—â–æ –ø—ñ—Å–ª—è —Ü—å–æ–≥–æ –∫–Ω–æ–ø–∫–∞ –≤—Å–µ —â–µ –Ω–µ –ø—Ä–∞—Ü—é—î - –¥–∏–≤–∏—Å—å –ø–æ–º–∏–ª–∫–∏ –≤ Console (F12).
